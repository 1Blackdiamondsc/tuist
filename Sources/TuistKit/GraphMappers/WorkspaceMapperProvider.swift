import Foundation
import TuistCore
import TuistGenerator
import TuistLoader

/// It defines an interface for providing the workspace mappers to be used for a specific configuration.
protocol WorkspaceMapperProviding {
    /// Returns a list of mappers to be used for a specific configuration.
    /// - Parameter config: Workspace's configuration.
    func mapper(config: Config) -> WorkspaceMapping
}

final class WorkspaceMapperProvider: WorkspaceMapperProviding {
    func mapper(config: Config) -> WorkspaceMapping {
        var mappers: [WorkspaceMapping] = []
                
        // Auto-generation of project scheme
        if !config.generationOptions.contains(.disableAutogeneratedSchemes) {
            mappers.append(AutogeneratedProjectSchemeWorkspaceMapper())
        }

        return SequentialWorkspaceMapper(mappers: mappers)
    }
}
